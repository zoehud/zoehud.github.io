<!-- JavaScript code for the quiz -->
<script>
  function checkAnswer(btn) {
    var answerIndex = {{include.answer}};
    var feedback = btn.parentNode.querySelector('.feedback');
    var choices = feedback.previousElementSibling.querySelector('.choices').getElementsByTagName('input');
    var pBody = feedback.previousElementSibling;
    var panel = pBody.parentNode;

    var selectedChoice;
    for (var i = 0; i < choices.length; i++) {
      choices[i].setAttribute('disabled', true);
      if (choices[i].checked) {
        selectedChoice = i;
      }
    }

    if (selectedChoice !== undefined) {
      var msg = feedback.querySelector('.success-msg');
      if (selectedChoice === answerIndex) {
        panel.classList.add('panel-success');
        msg.classList.remove('hidden');
      } else {
        panel.classList.add('panel-danger');
      }
    }

    btn.setAttribute('disabled', true);
  }

  function resetQuiz(btn) {
    var feedback = btn.parentNode.querySelector('.feedback');
    var choices = feedback.previousElementSibling.querySelector('.choices').getElementsByTagName('input');
    var pBody = feedback.previousElementSibling;
    var panel = pBody.parentNode;

    panel.classList.remove('panel-success');
    panel.classList.remove('panel-danger');
    panel.classList.add('panel-primary');

    for (var i = 0; i < choices.length; i++) {
      choices[i].checked = false;
      choices[i].removeAttribute('disabled');
    }

    btn.previousElementSibling.removeAttribute('disabled');
  }
</script>

<!-- HTML code for the quiz -->
<div class="mcq panel panel-primary" id="quiz1"> <!-- Add a unique identifier, e.g., id="quiz1" -->

  <!-- Question Text -->
  <div class="panel-heading">
    Question: {{ include.text }}
  </div>

  <!-- Answer Choices -->
  <div class="panel-body">
    <table class="choices table" style="border-bottom:1px solid #ddd">
      <tbody>
        {% for choice in include.choices %}
        <tr class="choice">
          <td class="choice-radio col-xs-1">
            <input type="radio" name="radio-choices">
          </td>
          <td class="choice-text">{{ choice | markdownify}}</td>
          <td class="choice-feedback"><span class="hidden text-muted">{{ include.feedback[forloop.index0] | markdownify }}</span></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Feedback and Check/Try Again Buttons -->
  <div class="feedback text-center">
    <span class="success-msg lead text-success hidden">You have successfully completed this question!</span>
  </div>
  <div class="text-center" style="padding: 5px;">
    <button class="check btn btn-primary" onclick="checkAnswer(this)">
      Check Answer
    </button>
    <button class="reset btn btn-default" onclick="resetQuiz(this)">
      Try Again
    </button>
  </div>

</div>
